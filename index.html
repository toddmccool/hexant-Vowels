<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Vowel Helper</title>
    <style>
      #hexant div {
        display: inline-block;
        width: 100px;
        height: 100px;
        text-align: center;
        vertical-align: middle;
        font-size: 25px;
        margin-right: 60px;
      }

      #Oo_OH,
      #Oe,
      #UH_AH {
        margin-right: 0;
      }

      #vowelSelection {
        display: flex;
        gap: 20px;
      }

      #vowelSelection select,
      #vowelSelection label {
        display: none;
      }

      #suggestionOptions {
        display: none;
      }

      #hexantWrapper {
        text-align: center;
      }

      #topText,
      #bottomText {
        width: 100%;
        text-align: center;
      }

      #topText {
        margin-bottom: 15px;
        white-space: nowrap;
      }

      #bottomText {
        margin-top: 15px;
      }

      #topText h2,
      #topText span {
        display: inline;
      }

      #centeringDiv {
        display: flex;
        justify-content: center;
        align-items: center;
      }

      #hexant {
        display: inline-block;
      }
    </style>
  </head>
  <body>
    <h2>
      the Following Hexant Chart has the sole purpose of <br />
      giving you pronounciation options (for specific results) <br />
      in the Passagio (the area of your voice that is between a pure head voice
      (some would call falsetto) <br />
      -and- your regular lower resonant speaking tone (many call this Chest
      voice)
    </h2>
    <h1>
    <form id="form">
      <label
        >Problem Word <i>(or you can skip to ↓ "Problem Vowel Character in the Word"):</i> 
      </label>
      <input type="text" id="problemWord" /><br /><br />
      <label id="problemVowelCharLabel"
        >Problem Vowel Character in the Word:
      </label>
      <input type="text" id="problemVowelChar" maxlength="1" /><br /><br />
      <div id="vowelSelection">
        <div id="letterSoundDiv">How that letter currently sounds here</div>
        <label id="brightLabel">Bright:</label>
        <select id="brightVowel">
          <option value="">--Select--</option>
          <option value="Aa">æ (cat)</option>
          <option value="eh">eh</option>
          <option value="ih">ih</option>
          <option value="ay">ay</option>
          <option value="ee">ee</option>
          <option value="iy">iy</option>
        </select>
        <label id="darkLabel">Dark:</label>
        <select id="darkVowel">
          <option value="">--Select--</option>
          <option value="ah">ah</option>
          <option value="uh">uh</option>
          <option value="oe">oe</option>
          <option value="oh">oh</option>
          <option value="oo">oo</option>
        </select>
      </div>
      <br />

      <button type="button" onclick="showSuggestionOptions()">
        Next Step
      </button>
      <div id="suggestionOptions">
       <br> <label>How Loud do you want to be ? </label>
        <select
          id="suggestionSelect"
          onchange="generateSuggestionOnSelect();"
        ></select>
      </div>
    </form>
    <h2 id="suggestion"></h2>
    <div id="hexantWrapper">
      <div id="topText">
        <h2><em>EE</em></h2>
        <span
          >-- HEAD VOICE FRIENDLY : Narrow Shrill Vowels - get Loud! --</span
        >
        <h2><em>OO</em></h2>
        <br />
      </div>
    </div>
    <div id="centeringDiv">
      <div id="hexant">
        <br />
        <div id="AY">AY!!</div>
        <div id="OH">OH!!</div>
        <br />
        <i>
          <div id="IH">ih</div>
          <div id="Oe">oe</div>
        </i>
        <br />
        <div id="EH_AA">eh / æ</div>
        <div id="UH_AH">uh / ah</div>
      </div>
    </div>
    <div id="bottomText">
      BELLOWING SPEAKING VOICE FRIENDLY : Wide Vowels - get Quiet
   
  </h1>
</div>
    <script>
      const brightSuggestions = [
        { value: "æ (cat)", text: "i want to be quiet & mellow" },
        { value: "eh", text: "i want to be at SPEAKing volume" },
        { value: "AY", text: "I'm here for LOUD Belting!!" },
        { value: "ee", text: "Head Voice it - above my passagio" },
        { value: "ih", text: "medium volume" },
      ];

      const darkSuggestions = [
        { value: "ah", text: "i want to be quiet & mellow" },
        { value: "uh", text: "i want to be at SPEAKing volume" },
        { value: "OH", text: "I'm here for LOUD Belting!!" },
        { value: "oo", text: "Head Voice it - above my passagio" },
        { value: "oe", text: "medium volume" },
      ];

      document
        .getElementById("problemVowelChar")
        .addEventListener("input", function () {
          let problemVowelChar = this.value;
          let letterSoundDiv = document.getElementById("letterSoundDiv");
          let brightLabel = document.getElementById("brightLabel");
          let darkLabel = document.getElementById("darkLabel");
          let brightVowelSelect = document.getElementById("brightVowel");
          let darkVowelSelect = document.getElementById("darkVowel");

          if (problemVowelChar) {
            letterSoundDiv.textContent = `How ${problemVowelChar} sounds`;
            brightLabel.style.display = "none";
            darkLabel.style.display = "none";
            brightVowelSelect.style.display = "none";
            darkVowelSelect.style.display = "none";

            if (
              ["e", "a", "i"].includes(problemVowelChar.toLowerCase()) &&
              problemVowelChar.toLowerCase() !== "ah" &&
              problemVowelChar.toLowerCase() !== "ie"
            ) {
              brightLabel.style.display = "inline-block";
              brightVowelSelect.style.display = "inline-block";
            } else if (["o", "u"].includes(problemVowelChar.toLowerCase())) {
              darkLabel.style.display = "inline-block";
              darkVowelSelect.style.display = "inline-block";
            }
          } else {
            letterSoundDiv.textContent = "How that letter Sounds";
            brightLabel.style.display = "none";
            darkLabel.style.display = "none";
            brightVowelSelect.style.display = "none";
            darkVowelSelect.style.display = "none";
          }
        });

      function showSuggestionOptions() {
        const brightVowelElem = document.getElementById("brightVowel");
        const darkVowelElem = document.getElementById("darkVowel");
        const suggestionOptionsElem =
          document.getElementById("suggestionOptions");
        const suggestionSelectElem =
          document.getElementById("suggestionSelect");

        let suggestions = [];
        if (brightVowelElem.value) suggestions = brightSuggestions;
        else if (darkVowelElem.value) suggestions = darkSuggestions;

        suggestionSelectElem.innerHTML =
          '<option value="">--Select--</option>' +
          suggestions
            .map((s) => `<option value="${s.value}">${s.text}</option>`)
            .join("");
        suggestionOptionsElem.style.display = "block";
      }

      function generateSuggestionOnSelect() {
        const suggestionSelectElem =
          document.getElementById("suggestionSelect");

        if (suggestionSelectElem.value) {
          generateSuggestion();
        }
      }

      function generateSuggestion() {
        const problemWordElem = document.getElementById("problemWord");
        const problemVowelCharElem =
          document.getElementById("problemVowelChar");
        const suggestionSelectElem =
          document.getElementById("suggestionSelect");
        const suggestionElem = document.getElementById("suggestion");

        let problemWord = problemWordElem.value;
        let problemVowelChar = problemVowelCharElem.value;
        let takenSuggestion = suggestionSelectElem.value.split(" ")[0];

        if (takenSuggestion) {
          const modifiedWord = problemWord.replace(
            new RegExp(problemVowelChar, "i"),
            takenSuggestion
          );
          suggestionElem.textContent = modifiedWord;

          document.querySelectorAll("#hexant div").forEach((div) => {
            div.style.backgroundColor = "";
          });

          let hexantDiv = Array.from(
            document.querySelectorAll("#hexant div")
          ).find((div) => {
            const upperCaseDivText = div.textContent.toUpperCase();
            const upperCaseTakenSuggestion = takenSuggestion
              .split(" ")[0]
              .toUpperCase(); // This line is changed
            return upperCaseDivText.includes(upperCaseTakenSuggestion);
          });

          if (hexantDiv) hexantDiv.style.backgroundColor = "yellow";
        }
      }
      document
        .getElementById("problemWord")
        .addEventListener("keyup", function () {
          let problemWord = this.value; // get the current value of problemWord input
          let label = document.getElementById("problemVowelCharLabel"); // get the label element
          if (problemWord) {
            label.innerHTML = `Problem Vowel in "${problemWord}": `;
          } else {
            label.innerHTML = "Problem Vowel Character in the Word: "; // reset to default if problemWord is empty
          }
        });
    </script>
  </body>
</html>
